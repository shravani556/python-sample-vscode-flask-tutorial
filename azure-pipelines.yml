# Python package
trigger:
- main

pool:
  name: Default

steps:
- task: CmdLine@2
  inputs:
    script: |
      runas /user:Administrator "$(PYTHON_PATH)" -m pip install --upgrade pip
      runas /user:Administrator "$(PYTHON_PATH)" -m pip install -r requirements.txt
      runas /user:Administrator "$(PYTHON_PATH)" -m pip install pytest pytest-azurepipelines
      runas /user:Administrator "$(PYTHON_PATH)" -m pytest
  displayName: 'Install dependencies and run tests'